**`npm ci`**(также известный как **Clean** Install ) Он устанавливает зависимости напрямую `package-lock.json`и использует `package.json`только для проверки отсутствия несоответствующих версий. Если какие-либо зависимости отсутствуют или имеют несовместимые версии, он выдаст ошибку. Ранее, разработчики, которые желали получить синхронизированные node_mobules и package.json, архивировали свою папку node_modules. npm ci заменяет этот процесс единственной командой.

Эта команда похожа на [`npm install`](https://docs.npmjs.com/cli/v10/commands/npm-install), за исключением того, что она предназначена для использования в автоматизированных средах, таких как тестовые платформы, непрерывная интеграция и развертывание, или в любой ситуации, когда вы хотите убедиться, что выполняете чистую установку своих зависимостей. 
`npm ci`удалит любую существующую `node_modules`папку и полагается на `package-lock.json`файл для установки определенной версии каждого пакета. Это значительно быстрее, чем npm install, потому что он пропускает некоторые функции. Его чистая установка отлично подходит для конвейеров ci/cd и сборок docker! Вы также используете его для установки всего сразу, а не отдельных пакетов.

Основные различия между использованием `npm install`и `npm ci`заключаются в следующем:
- Проект **должен** иметь существующий `package-lock.json`или `npm-shrinkwrap.json`.
- Если зависимости в блокировке пакета не соответствуют зависимостям в `package.json`, `npm ci`произойдет выход с ошибкой вместо обновления блокировки пакета.
- `npm ci`можно устанавливать только целые проекты за раз: отдельные зависимости не могут быть добавлены с помощью этой команды.
- Если a `node_modules`уже присутствует, он будет автоматически удален перед `npm ci`началом установки.
- Он никогда не будет записывать данные `package.json`или блокировать пакеты: установки по сути заморожены.

По сути **`npm install` читает , `package.json`чтобы создать список зависимостей, и использует `package-lock.json`, чтобы сообщить, какие версии этих зависимостей устанавливать. Если зависимость отсутствует, `package-lock.json`она будет добавлена`npm install` ​​.

`npm ci`следует использовать, когда вы собираетесь тестировать и выпускать производственное приложение (конечный продукт, который не будет использоваться другими пакетами), поскольку важно, чтобы установка была максимально детерминированной;

**npm ci может быть использована для возвращения к изначальному состоянию, если npm i завершился с ошибкой, и наоборот.**

https://docs.npmjs.com/cli/v10/commands/npm-ci